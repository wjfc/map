webpackJsonp([1],{"+bWZ":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("rRp2"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("wK3u");var r=function(t){s("bn/Q")},c=s("VU/8")(i.a,o.a,!1,r,"data-v-64af854c",null);e.default=c.exports},"+qAu":function(t,e,s){t.exports=s.p+"static/img/infoBg.4f10d54.png"},"0xDb":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(s("OZAJ")),i=r(s("dmK0")),a=r(s("iEWo")),o=r(s("PNBJ"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={hmacSha256:n.default,getPrame:i.default,getCorrectNum:a.default,transLocation:o.default}},"1uPy":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(s("rM89")),i=o(s("q87W")),a=(o(s("HR9g")),o(s("0xDb")),o(s("Apws")));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"busLines",data:function(){return{msg:"",options:{},busList:[]}},created:function(){},mounted:function(){this.options={name:this.$route.query.lname+"路",lname:this.$route.query.lname,lguid:this.$route.query.lguid,isMain:this.$route.query.isMain},this.getBusList()},methods:{goBusMapPreview:function(){this.$router.push({path:"/"})},getBusList:function(){var t=this,e={lname:this.options.lname,includeStation:!0};a.default.findChannelBySguids(e,function(s){t.busList=s.data.records,t.busList=t.busList.filter(function(t){return t.lname==e.lname})})},goBusLinesInfo:function(t){this.$router.push({path:"/busLineInfo",query:{name:this.options.lname+"路",lname:this.options.lname,lguid:this.options.lguid,isMain:this.options.isMain,focusIndex:t}})}},components:{basicHeader:n.default,mapPreview:i.default}}},"2GkE":function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"destation"},[s("basicHeader",{attrs:{desName:t.msg}}),t._v(" "),s("mapComponent",{ref:"mapObj",staticClass:"mapComponent2",attrs:{dataFLag:!1}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.walkingTips,expression:"walkingTips"}],staticClass:"walking-tips",on:{click:t.closeWalkingTips}},[t._v(t._s(t.tipsInfo))]),t._v(" "),s("div",{staticClass:"tips"},[s("div",{staticClass:"tips-l"},[s("p",[t._v(t._s(t.options.name))]),t._v(" "),s("p",[t._v(t._s(t.options.address))])]),t._v(" "),s("div",{staticClass:"tips-r",on:{click:function(e){t.busList()}}},[s("p",{staticClass:"icon-wj_ic_onfoot"}),t._v(" "),s("p",[t._v("去这里")])])])],1)},staticRenderFns:[]};e.a=n},"2VnK":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},a=s("NYxO"),o=s("HR9g"),r=(n=o)&&n.__esModule?n:{default:n};e.default={name:"mapApp",data:function(){return{msg:"地图",map:{},showFlags:this.dataFLag,mapErrorFlag:!0}},mounted:function(){this.mapInit()},props:["dataFLag","dataFrom"],methods:i({},(0,a.mapMutations)(["changeNowLocation"]),{mapInit:function(){this.map=new AMap.Map("mapApp",{zoom:13,resizeEnable:!0}),this.mapErrorFlag=!1,this.map.setCity(r.default.adname);var t=this;AMap.plugin(["AMap.ToolBar","AMap.Geolocation"],function(){var e=new AMap.ToolBar({});t.map.addControl(e);var s=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new AMap.Pixel(10,20),showMarker:!0,markerOptions:{offset:new AMap.Pixel(-16,-16),content:'<img src="./static/images/location.png" style="width:36px;height:36px" id="locationIcon"/>'},showCircle:!1,panToLocation:t.showFlags,zoomToAccuracy:t.showFlags});t.map.addControl(s),s.getCurrentPosition(),AMap.event.addListener(s,"complete",function(e){var s=e.position.getLng(),n=e.position.getLat();t.$store.commit("changeNowLocation",s+","+n),t.changeNowLocation(s+","+n),"home"==t.dataFrom&&t.$emit("wjtran_search")}),AMap.event.addListener(s,"error",function(e){"home"==t.dataFrom&&t.$emit("wjtran_search")}),document.getElementsByClassName("amap-geolocation-con")[0].addEventListener("click",function(){s.options.panToLocation=!0,s.options.zoomToAccuracy=!0,s.getCurrentPosition()},!1)})},mapError:function(){this.mapErrorFlag=!0},refreshMap:function(){window.location.reload()}})}},"4dR6":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("CoRO"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("xzUU");var r=function(t){s("RMYl")},c=s("VU/8")(i.a,o.a,!1,r,"data-v-233bbb33",null);e.default=c.exports},"4duQ":function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notice"},[s("basicHeader",{attrs:{desName:t.msg}}),t._v(" "),s("div",{staticClass:"noticeLists"},t._l(t.noticeList,function(e,n){return s("div",{key:n,staticClass:"noticeItem"},[s("router-link",{attrs:{to:{path:"noticeInfo",query:{id:e.id,title:e.title}}}},[s("div",{staticClass:"notice-header",class:{first:0==n}},[t._v(t._s(e.pubTime))]),t._v(" "),s("div",{staticClass:"notice-content"},[s("h3",[t._v(t._s(e.title))])])])],1)}),0),t._v(" "),s("div",{staticClass:"infinite-wrapper"},[s("infinite-loading",{on:{infinite:t.infiniteHandler}},[s("div",{staticClass:"nomore",attrs:{slot:"no-more"},slot:"no-more"},[t._v("没有更多了...")])])],1)],1)},staticRenderFns:[]};e.a=n},"71Jw":function(t,e,s){"use strict";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};e.a=n},"7GCb":function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"busMap"},[n("basicHeader",{attrs:{desName:t.options.name+"-"+t.options.address}}),t._v(" "),n("mapComponent",{ref:"mapObj",staticClass:"mapComponent2",attrs:{dataFLag:!1}}),t._v(" "),n("div",{staticClass:"busmap-bottom"},[n("ul",{staticClass:"line-list"},t._l(t.transits,function(e,s){return n("li",{key:s,class:{focus:t.focusIndex===s},on:{click:function(e){t.switchItem(s)}}},[n("p",[t._v(t._s(t._f("formatTime")(e.duration)))]),t._v(" "),n("p",[t._v(t._s(t._f("formatDistance")(e.distance)))])])}),0),t._v(" "),n("div",{staticClass:"line-info"},[n("ul",{style:t.styleObject},t._l(t.transits,function(e,i){return n("li",{key:i},[n("div",{staticClass:"info-l"},[n("div",{staticClass:"bus",attrs:{id:"bus-normal"},domProps:{innerHTML:t._s(t.formatBus(e.segments))}}),t._v(" "),n("p",[t._v("步行"+t._s(e.walking_distance)+"m")])]),t._v(" "),n("div",{staticClass:"info-r",on:{click:function(e){t.goBusDetail(i)}}},[n("img",{attrs:{src:s("+qAu"),alt:""}})])])}),0)])])],1)},staticRenderFns:[]};e.a=n},"7biW":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("CNvo"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("jyS4");var r=function(t){s("Hmxg")},c=s("VU/8")(i.a,o.a,!1,r,"data-v-6adc100e",null);e.default=c.exports},"8MNp":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"busCode",data:function(){return{msg:"乘车码按钮"}},methods:{tapBusCode:function(){window.location.href="https://app.smartwj.net:10029/h5/citizenCard/#/"}}}},Ae9V:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"road",attrs:{id:"road"}},[n("mapComponent",{ref:"mapObj",staticClass:"mapComponent2",attrs:{dataFLag:!1}}),t._v(" "),n("header",[n("div",{staticClass:"destation"},[n("div",{staticClass:"backArrow icon-wj_ic_back",on:{click:function(e){t.goBack()}}}),t._v(" "),n("p",[t._v(t._s(t.options.title))]),t._v(" "),n("img",{attrs:{src:s("Z7VJ"),alt:""},on:{click:function(e){t.home()}}})]),t._v(" "),n("div",{staticClass:"searchRoutes"},[n("div",{staticClass:"startInput inputBox"},[n("i",{staticClass:"icon-coordinate"}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchStart,expression:"searchStart",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"输入起点"},domProps:{value:t.searchStart},on:{input:[function(e){e.target.composing||(t.searchStart=e.target.value.trim())},function(e){t.submitSearch(0)}],focus:function(e){t.inputFocus(0)},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"endInput inputBox"},[n("i",{staticClass:"icon-coordinate"}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchEnd,expression:"searchEnd",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"输入终点"},domProps:{value:t.searchEnd},on:{input:[function(e){e.target.composing||(t.searchEnd=e.target.value.trim())},function(e){t.submitSearch(1)}],focus:function(e){t.inputFocus(1)},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"switchDirection",on:{click:t.switchDirection}})]),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:!t.showSearchResult,expression:"!showSearchResult"}],staticClass:"strategy"},t._l(t.strategy,function(e,s){return n("li",{key:s,class:{focus:s===t.typeIndex},on:{click:function(e){t.getRoutes(s)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),0)]),t._v(" "),t.showSearchResult?n("ul",{staticClass:"searchLists"},t._l(t.searchResultList,function(e,s){return n("li",{key:s,staticClass:"listItem"},[n("p",{on:{click:function(n){t.fillInput(e,s)}}},[t._v(t._s(e.name))])])}),0):t._e(),t._v(" "),n("div",{staticClass:"routesBox"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showSearchResult&&t.transits.length>0,expression:"!showSearchResult && transits.length > 0"}],staticClass:"routes"},t._l(t.transits,function(e,s){return n("div",{key:s,staticClass:"listbox",on:{click:function(e){t.goBusMap(s)}}},[n("basicList",{attrs:{v:e}})],1)}),0)]),t._v(" "),t.transits.length<1?n("div",{staticClass:"nosearch"},[t._v("暂无搜索结果哟~")]):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}],staticClass:"loading"},[n("p",[t._v(t._s(t.loadingText))]),t._v(" "),t._m(0)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showSameDirection,expression:"showSameDirection"}],staticClass:"sameDirection"},[t._v("\n    "+t._s(t.showSameText)+"\n  ")])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loadEffect"},[e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span")])}]};e.a=n},Ap89:function(t,e){},Apws:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(s("mtWM")),i=r(s("7t+N")),a=r(s("OZAJ")),o=r(s("HR9g"));function r(t){return t&&t.__esModule?t:{default:t}}var c=n.default.create({});e.default={getRoutesInfo:function(t,e){c.get("https://restapi.amap.com/v3/direction/transit/integrated",{params:t}).then(function(t){e(t)})},getWalkingInfo:function(t,e){c.get("https://restapi.amap.com/v3/direction/walking",{params:t}).then(function(t){e(t)})},searchByKeyword:function(t,e){c.get("https://restapi.amap.com/v3/assistant/inputtips",{params:t}).then(function(t){e(t)}).catch(function(t){e(t)})},searchStationByRange:function(t,e){c.get("/wjtran/station/search",{params:t}).then(function(t){e(t)}).catch(function(t){e(t)})},searchRege:function(t,e){c.get("https://restapi.amap.com/v3/geocode/regeo",{params:t}).then(function(t){e(t)}).catch(function(t){e(t)})},findChannelBySguids:function(t,e){c.get("/wjtran/channel/find",{params:t}).then(function(t){e(t)}).catch(function(t){e(t)})},matchChannel:function(t,e){c.get("/wjtran/channel/match",{params:t}).then(function(t){e(t)}).catch(function(t){e(t)})},findBusInfo:function(t,e){c.get("/wjtran/busInfo/find",{params:t}).then(function(t){e(t)}).catch(function(t){e(t)})},ggjt_list:function(t,e){c.get("/ggjt/list",{params:t}).then(function(t){e(t)}).catch(function(t){e(t)})},ggjt_info:function(t,e){var s="/ggjt/detail?id="+t;c.get(s).then(function(t){e(t)}).catch(function(t){e(t)})},getSmToken2:function(t,e){var s="";for(var n in t)s+=n+"="+t[n]+"&";s=s.substr(0,s.length-1);var r=a.default.getFilterTime(),c=a.default.hmacSha256(s,r,"POST",o.default.smAppSecret),u="Digest Algorithm=HMAC-SHA256,AccessKeyId="+o.default.smAppid+",TimeStamp="+r+",Signature="+c;i.default.ajax({url:"/service/api/b6c30553454d4b719c3248f58d49ef5b/oauth2/token?"+s,type:"post",dataType:"json",headers:{Authorization:u},success:function(t){e(t)},error:function(t){e(t)}})},getSmUserid2:function(t,e){var s="";for(var n in t)s+=n+"="+t[n]+"&";s=s.substr(0,s.length-1);var r=a.default.getFilterTime(),c=a.default.hmacSha256(s,r,"GET",o.default.smAppSecret),u="Digest Algorithm=HMAC-SHA256,AccessKeyId="+o.default.smAppid+",TimeStamp="+r+",Signature="+c;i.default.ajax({url:"/service/api/e4068dda62504ce4a518bcf8b955723e/openApi/user/getDetailedNormalUser?"+s,type:"get",dataType:"text",headers:{Authorization:u},success:function(t){e(t)},error:function(t){e(t)}})},sendMsg2:function(t,e){var s=(new Date).getTime(),n={appId:o.default.mesAppid,messageType:"text",text:t.text,title:t.title,toUserId:t.toUserId},r="";for(var c in n)r+=c+"="+n[c]+"&";r=r.substr(0,r.length-1);var u=a.default.hmacSha256_send(r,s,"POST",o.default.mesAppSecret);r+="&sign="+u+"&timeStamp="+s,n.sign=u,n.timeStamp=s,i.default.ajax({url:"/Message/send",data:JSON.stringify(n),dataType:"json",type:"post",contentType:"application/json;charset=UTF-8",success:function(t){e(t)},error:function(t){e(t)}})},callBusWarn:function(t,e){c.get("/interfaces/bus/callBusWarn",{params:t}).then(function(t){e(t)}).catch(function(t){e(t)})}}},C9wk:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(s("Apws")),i=r(s("rM89")),a=r(s("dXPy")),o=r(s("HR9g"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"destation",data:function(){return{msg:"目的地",options:{},walkingTips:!1,tipsInfo:"路程较短建议步行!",touchMark:null,walkingTime:null}},created:function(){},mounted:function(){var t=this;this.options={name:decodeURI(this.$route.query.name),address:decodeURI(this.$route.query.address),location:this.$route.query.location},setTimeout(function(){t.addMark(t.$route.query.location)},500),this.mapListener()},methods:{busList:function(){var t=this;if(this.$store.state.location_now)e=this.$store.state.location_now;else var e=localStorage.getItem("location_now");var s={origin:e,destination:this.options.location,key:o.default.key,city:o.default.adname};n.default.getRoutesInfo(s,function(e){"OK"==e.data.info?e.data.route.transits.length>0?t.$router.push({path:"/busList",query:{name:encodeURI(t.options.name),address:encodeURI(t.options.address),location:t.options.location}}):(t.tipsInfo="路程较短建议步行!",t.showWalkTips()):(t.tipsInfo="路程较远，无公交方案提供！",t.showWalkTips())})},addMark:function(t){var e=new AMap.Icon({size:new AMap.Size(29,35),image:"./static/images/endIcon.png",imageSize:new AMap.Size(29,35)});this.touchMark&&this.clearTouchIcon(),this.touchMark=new AMap.Marker({position:new AMap.LngLat(t.split(",")[0],t.split(",")[1]),offset:new AMap.Pixel(-10,-10),icon:e,title:"010",zoom:13,map:this.map}),this.$refs.mapObj.map.add([this.touchMark]),this.$refs.mapObj.map.setFitView([this.touchMark])},clearTouchIcon:function(){this.$refs.mapObj.map.remove(this.touchMark),this.touchMark=null},showWalkTips:function(){this.walkingTips=!0;var t=this;this.walkingTime&&clearInterval(this.walkingTime),this.walkingTime=setTimeout(function(){t.walkingTips=!1},3e3)},closeWalkingTips:function(){clearInterval(this.walkingTime),this.walkingTime=null,this.walkingTips=!1},mapListener:function(){var t=this;this.$refs.mapObj.map.on("touchstart",function(e){t.touchTime=(new Date).getTime()}),this.$refs.mapObj.map.on("touchend",function(e){if((new Date).getTime()-t.touchTime>500){var s=e.lnglat.getLng(),i=e.lnglat.getLat(),a={key:o.default.key,location:s+","+i};n.default.searchRege(a,function(e){var s=e.data.regeocode,n=(s.formatted_address,s.addressComponent.province),i=s.addressComponent.city,o=s.formatted_address.replace(n,"");o=o.replace(i,""),s.addressNum=s.addressComponent.streetNumber.street+s.addressComponent.streetNumber.number,t.options={name:decodeURI(o),address:decodeURI(s.addressNum),location:a.location},t.addMark(a.location)})}})}},computed:{},components:{basicHeader:i.default,mapComponent:a.default}}},CNvo:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(s("Apws")),i=a(s("HR9g"));function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:"searchInput",data:function(){return{msg:"头部搜索框",searchContent:"",historyList:[],searchStorage:[],clearMsg:"取消",showList:!1,nosearch:!1}},created:function(){},mounted:function(){var t=localStorage.getItem("searchStorage");t&&(this.searchStorage=JSON.parse(t))},methods:{submitSearch:function(t){this.nosearch=!1;var e=this;if(!this.searchContent)return e.historyList=e.searchStorage,e.showList=e.historyList.length>0,e.clearMsg="清空",!1;if(/^[0-9]*$/.test(this.searchContent)){var s={lname:this.searchContent};n.default.findChannelBySguids(s,function(t){var s=[];t.data.records.forEach(function(t,e){for(var n=!0,i=0;i<s.length;i++)if(s[i].name==t.lname+"路")return n=!1,!1;n&&(t.name=t.lname+"路",t.id="wjgj",s.push(t))}),e.historyList=s,e.historyList.length>0?e.showList=!0:e.showList=!1,e.clearMsg="取消"})}else{s={key:i.default.key,keywords:this.searchContent,city:i.default.adcode,citylimit:!0,type:"15000|"};n.default.searchByKeyword(s,function(t){var s=[];t.data.tips.forEach(function(t,e){t.location.length>0&&s.push(t)}),e.historyList=s,e.historyList.length>0?e.showList=!0:e.showList=!1,e.clearMsg="取消"})}},inputFocus:function(){this.showList=!0,""==this.searchContent&&(this.historyList=this.searchStorage,0==this.historyList&&(this.showList=!1),this.clearMsg="清空")},inputBlur:function(){},goDestation:function(t){var e=this.uniqueList(t,this.searchStorage);e>-1?(this.searchStorage.splice(e,1),this.searchStorage.unshift(t)):this.searchStorage.unshift(t),localStorage.setItem("searchStorage",JSON.stringify(this.searchStorage)),this.searchContent=t.name,t.id.indexOf("B")>-1?this.$router.push({path:"/destation",query:{name:encodeURI(t.name),address:encodeURI(t.address),location:t.location}}):"wjgj"==t.id&&this.$router.push({path:"/busLines",query:{lname:t.lname,lguid:t.lguid,isMain:t.isMain}})},clearList:function(){this.showList=!1,"取消"==this.clearMsg||(this.searchStorage=[],localStorage.removeItem("searchStorage"))},hideList:function(){this.showList=!1},hideNosearch:function(){this.nosearch=!1,this.searchContent=""},uniqueList:function(t,e){for(var s=-1,n=0;n<e.length;n++)t.id===e[n].id&&(s=n);return s}},watch:{historyList:function(t,e){t.length<1&&""!==this.searchContent?this.nosearch=!0:this.nosearch=!1}}}},Ckdx:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("8MNp"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("Ixgc");var r=function(t){s("S1k5")},c=s("VU/8")(i.a,o.a,!1,r,"data-v-5b5d5412",null);e.default=c.exports},CoRO:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"basicList",data:function(){return{msg:"通用列表"}},props:["v","activeIndex","mysegment"],mounted:function(){},methods:{formatBus:function(t){var e=t,s=e.length,n="";return e.forEach(function(t,e){if(t.bus.buslines.length>0){var i=t.bus.buslines[0].name.indexOf("(");name=i>-1?t.bus.buslines[0].name.substr(0,i):t.bus.buslines[0].name;var a=e==s-1?"<span>"+name+"</span>":"<span>"+name+"</span><i class='icon-wj_ic_diraction'></i>";n+=a}}),n}},filters:{formatTime:function(t){var e=Math.ceil(t/60),s=Math.floor(e/60);return(s=s>0?s+"小时":"")+(e%60+"分钟")},formatStations:function(t){var e=0;return t.forEach(function(t,s){t.bus.buslines.length>0&&(e+=parseInt(t.bus.buslines[0].via_num)+2)}),e+"站"},formatDeparture_stop:function(t){return t[0].bus.buslines[0].departure_stop.name+"上车"}}}},EWIa:function(t,e){},Exd9:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"busMap-preivew"},[s("basicHeader",{attrs:{desName:t.options.name}}),t._v(" "),s("mapComponent",{ref:"mapObj",staticClass:"mapComponent2",attrs:{dataFLag:!1}}),t._v(" "),s("div",{staticClass:"mapPreview"},[s("swiper",{ref:"mySwiper",attrs:{options:t.swiperOption},on:{slideChangeTransitionEnd:t.slideChangeTransitionEnd}},[t._l(t.steps,function(e,n){return s("swiper-slide",{key:n},[s("div",{staticClass:"stepItem"},[s("p",{directives:[{name:"show",rawName:"v-show",value:e.desc,expression:"v.desc"}]},[t._v(t._s(e.desc))]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.distance,expression:"v.distance"}]},[t._v(t._s(e.distance))])])])}),t._v(" "),s("div",{staticClass:"swiper-button-prev1 swiper-button icon-wj_ic_left",attrs:{slot:"button-prev"},slot:"button-prev"}),t._v(" "),s("div",{staticClass:"swiper-button-next1 swiper-button icon-wj_ic_right",attrs:{slot:"button-next"},slot:"button-next"})],2)],1)],1)},staticRenderFns:[]};e.a=n},Fg5d:function(t,e){},GCac:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("1uPy"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("zylF");var r=function(t){s("rtOn")},c=s("VU/8")(i.a,o.a,!1,r,"data-v-7dc2dabf",null);e.default=c.exports},H7zA:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(s("Apws")),i=r(s("HR9g")),a=r(s("rM89")),o=r(s("dXPy"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"busMap",data:function(){return{msg:"bus地图",options:{},origin:"",destination:"",focusIndex:0,styleObject:{},walkLines:[],busLines:[],transits:[]}},created:function(){},mounted:function(){this.options={name:decodeURI(this.$route.query.name),address:decodeURI(this.$route.query.address),origin:this.$route.query.origin,location:this.$route.query.location,type:this.$route.query.type,focusIndex:this.$route.query.focusIndex},this.focusIndex=Number(this.$route.query.focusIndex),this.destination=this.$route.query.location,this.origin=this.$route.query.origin,this.getRoutes(this.options.type)},methods:{getRoutes:function(t){var e=this,s={origin:this.options.origin,destination:this.options.location,key:i.default.key,city:i.default.adname,strategy:this.options.type};n.default.getRoutesInfo(s,function(t){e.showRoutes(t.data.route.transits)})},showRoutes:function(t){this.transits=t,this.styleObject={width:100*t.length+"%"},this.drawStartAndEnd(),this.drawbusLine(t[this.focusIndex]),this.switchItem(this.focusIndex)},switchItem:function(t){this.focusIndex=t;var e=-t/this.transits.length*100+"%";this.styleObject={width:100*this.transits.length+"%",transform:"translate3d("+e+", 0, 0)"},this.drawbusLine(this.transits[t])},addMark:function(t){var e=new AMap.Icon({size:new AMap.Size(29,35),image:".static/images/mark0.png",imageSize:new AMap.Size(29,35)}),s=new AMap.Marker({position:new AMap.LngLat(t.split(",")[0],t.split(",")[1]),offset:new AMap.Pixel(-15,-18),icon:e,title:"010",zoom:13,map:this.map});this.$refs.mapObj.map.add([s]),this.$refs.mapObj.map.setFitView([s])},drawbusLine:function(t){try{var e=this;this.walkLines.forEach(function(t,s){e.$refs.mapObj.map.remove(t)})}catch(t){}this.getpolyline(t)},drawStartAndEnd:function(t){var e=new AMap.Icon({size:new AMap.Size(29,35),image:"./static/images/startIcon.png",imageSize:new AMap.Size(29,35)}),s=new AMap.Marker({position:new AMap.LngLat(this.origin.split(",")[0],this.origin.split(",")[1]),offset:new AMap.Pixel(-15,-18),icon:e,zoom:13}),n=new AMap.Icon({size:new AMap.Size(29,35),image:"./static/images/endIcon.png",imageSize:new AMap.Size(29,35)}),i=new AMap.Marker({position:new AMap.LngLat(this.destination.split(",")[0],this.destination.split(",")[1]),offset:new AMap.Pixel(-15,-18),icon:n,zoom:13});this.$refs.mapObj.map.add([s,i]),this.$refs.mapObj.map.setFitView()},getpolyline:function(t){var e=this;t.segments.forEach(function(t,s){if(t.walking){var n=[],i=null;if(t.walking.steps){for(var a=0;a<t.walking.steps.length;a++)for(var o=t.walking.steps[a].polyline.split(";"),r=0;r<o.length;r++)n.push([o[r].split(",")[0],o[r].split(",")[1]]);i=new AMap.Polyline({path:n,isOutline:!0,outlineColor:"#ffeeee",borderWeight:2,strokeWeight:5,strokeColor:"#37cabe",lineJoin:"round",strokeStyle:"dashed",zIndex:10}),e.walkLines.push(i),e.$refs.mapObj.map.add(i),e.$refs.mapObj.map.setFitView([i])}}if(t.bus.buslines.length>0){var c,u=[];t.bus.buslines[0].polyline.split(";").forEach(function(t,e){u.push([t.split(",")[0],t.split(",")[1]])}),c=new AMap.Polyline({path:u,isOutline:!0,outlineColor:"white",strokeColor:"#37cabe",strokeOpacity:.5,lineJoin:"round",strokeWeight:6,zIndex:9}),e.walkLines.push(c),e.$refs.mapObj.map.add(c),e.$refs.mapObj.map.setFitView([c])}e.$refs.mapObj.map.setFitView()})},formatBus:function(t){var e=t,s=e.length,n="";return e.forEach(function(t,e){if(t.bus.buslines.length>0){var i=t.bus.buslines[0].name.indexOf("(");name=i>-1?t.bus.buslines[0].name.substr(0,i):t.bus.buslines[0].name;var a=e==s-1?"<span>"+name+"</span>":"<span>"+name+"</span><i class='icon-wj_ic_diraction'></i>";n+=a}}),n},goBusDetail:function(t){this.$router.push({path:"/busDetail",query:{name:encodeURI(this.options.name),address:encodeURI(this.options.address),origin:this.options.origin,location:this.options.location,type:this.options.type,focusIndex:this.focusIndex}})}},computed:{},components:{basicHeader:a.default,mapComponent:o.default},filters:{formatTime:function(t){var e=Math.ceil(t/60),s=Math.floor(e/60);return(s=s>0?s+"小时":"")+(e%60+"分钟")},formatDistance:function(t){return parseFloat(t/1e3).toFixed(2)+"km"}}}},HG7d:function(t,e){},HR9g:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={adcode:"320509",adname:"吴江",key:"886d5915b8bb2336109e4e4095e9ebb3",smAppid:"a2c2c57f79df47d7addfae4c1ae090be",smAppSecret:"36b76c08f0e8453fb961fae098121bd1",mesAppid:"0000kIDZbT1",mesAppSecret:"4151efd4-2c30-4910-a410-ad232c25a789",redirect_uri:"https://gjcx.smartwj.net:8999/dist/index.html"}},Hmxg:function(t,e){},IcnI:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(s("7+uW")),i=o(s("NYxO")),a=o(s("Apws"));function o(t){return t&&t.__esModule?t:{default:t}}n.default.use(i.default);var r={changeNowLocation:function(t,e){t.location_now=e,localStorage.setItem("location_now",e)},changeHistoryList:function(t,e){t.historyList=e}},c={getHistoryList:function(t,e){a.default.searchByKeyword(e,function(e){t.commit("changeHistoryList",e.data.tips)})}},u=new i.default.Store({state:{location_now:"",historyList:[]},mutations:r,actions:c});e.default=u},Ixgc:function(t,e,s){"use strict";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"busCode",on:{click:this.tapBusCode}},[e("i",{staticClass:"icon-wj_ic_ecord"}),this._v(" "),e("p",[this._v("乘车码")])])},staticRenderFns:[]};e.a=n},M93x:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("xJD8"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("71Jw");var r=function(t){s("TSp4")},c=s("VU/8")(i.a,o.a,!1,r,null,null);e.default=c.exports},NHnr:function(t,e,s){"use strict";var n=c(s("7+uW")),i=c(s("IcnI")),a=c(s("M93x")),o=c(s("YaEn")),r=c(s("7QTg"));function c(t){return t&&t.__esModule?t:{default:t}}s("v2ns"),s("EWIa"),s("sVYa"),s("TeAX"),n.default.use(r.default),n.default.config.productionTip=!1,new n.default({el:"#app",data:{},router:o.default,store:i.default,components:{App:a.default},template:"<App/>"})},ODnJ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(s("rM89")),i=o(s("qK+J")),a=o(s("mtWM"));o(s("Apws"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"notice",data:function(){return{msg:"通知",noticeList:[],pageSize:10,pageNum:1,page:1}},mounted:function(){},methods:{infiniteHandler:function(t){var e=this;a.default.get("/ggjt/list",{params:{pageIndex:this.page,pageSize:this.pageSize}}).then(function(s){var n,i=s.data;i.result.list.length?(e.page+=1,(n=e.noticeList).push.apply(n,function(t){if(Array.isArray(t)){for(var e=0,s=Array(t.length);e<t.length;e++)s[e]=t[e];return s}return Array.from(t)}(i.result.list)),t.loaded()):t.complete()})}},components:{basicHeader:n.default,InfiniteLoading:i.default}}},OZAJ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(s("Av7u"));i(s("HR9g"));function i(t){return t&&t.__esModule?t:{default:t}}e.default={hmacSha256:function(t,e,s,i){var a=s+"&"+encodeURIComponent("/")+"&";a+=encodeURIComponent(e).replace("%20","+")+"&"+encodeURIComponent(t);var o=n.default.HmacSHA256(a,i);return n.default.enc.Base64.stringify(o)},hmacSha256_send:function(t,e,s,i){t=t.replace(/%(?![0-9a-fA-F]{2})/gi,"%25");var a=s+"&"+encodeURIComponent("/")+"&";a+=e+"&"+encodeURIComponent(t);var o=n.default.HmacSHA256(a,i);return n.default.enc.Base64.stringify(o)},getFilterTime:function(){var t=new Date,e=t.getUTCFullYear(),s=t.getUTCMonth()+1;return e+"-"+(s=s<10?"0"+s:s)+"-"+(t.getUTCDate()<10?"0"+t.getUTCDate():t.getUTCDate())+" "+(t.getUTCHours()<10?"0"+t.getUTCHours():t.getUTCHours())+":"+(t.getUTCMinutes()<10?"0"+t.getUTCMinutes():t.getUTCMinutes())+":"+(t.getUTCSeconds()<10?"0"+t.getUTCSeconds():t.getUTCSeconds())}}},PNBJ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={PI:3.141592653589793,x_pi:52.35987755982988,delta:function(t,e){var s=6378245,n=.006693421622965943,i=this.transformLat(e-105,t-35),a=this.transformLon(e-105,t-35),o=t/180*this.PI,r=Math.sin(o);r=1-n*r*r;var c=Math.sqrt(r);return{lat:i=180*i/(s*(1-n)/(r*c)*this.PI),lon:a=180*a/(s/c*Math.cos(o)*this.PI)}},gcj_encrypt:function(t,e){if(this.outOfChina(t,e))return{lat:t,lon:e};var s=this.delta(t,e);return{lat:t+s.lat,lon:e+s.lon}},gcj_decrypt:function(t,e){if(this.outOfChina(t,e))return{lat:t,lon:e};var s=this.delta(t,e);return{lat:t-s.lat,lon:e-s.lon}},gcj_decrypt_exact:function(t,e){for(var s,n,i=.01,a=.01,o=t-i,r=e-a,c=t+i,u=e+a,l=0;;){s=(o+c)/2,n=(r+u)/2;var d=this.gcj_encrypt(s,n);if(i=d.lat-t,a=d.lon-e,Math.abs(i)<1e-9&&Math.abs(a)<1e-9)break;if(i>0?c=s:o=s,a>0?u=n:r=n,++l>1e4)break}return{lat:s,lon:n}},bd_encrypt:function(t,e){var s=e,n=t,i=Math.sqrt(s*s+n*n)+2e-5*Math.sin(n*this.x_pi),a=Math.atan2(n,s)+3e-6*Math.cos(s*this.x_pi);return bdLon=i*Math.cos(a)+.0065,bdLat=i*Math.sin(a)+.006,{lat:bdLat,lon:bdLon}},bd_decrypt:function(t,e){var s=e-.0065,n=t-.006,i=Math.sqrt(s*s+n*n)-2e-5*Math.sin(n*this.x_pi),a=Math.atan2(n,s)-3e-6*Math.cos(s*this.x_pi),o=i*Math.cos(a);return{lat:i*Math.sin(a),lon:o}},mercator_encrypt:function(t,e){var s=20037508.34*e/180,n=Math.log(Math.tan((90+t)*this.PI/360))/(this.PI/180);return{lat:n=20037508.34*n/180,lon:s}},mercator_decrypt:function(t,e){var s=e/20037508.34*180,n=t/20037508.34*180;return{lat:n=180/this.PI*(2*Math.atan(Math.exp(n*this.PI/180))-this.PI/2),lon:s}},distance:function(t,e,s,n){var i=Math.cos(t*this.PI/180)*Math.cos(s*this.PI/180)*Math.cos((e-n)*this.PI/180)+Math.sin(t*this.PI/180)*Math.sin(s*this.PI/180);i>1&&(i=1),i<-1&&(i=-1);var a=6371e3*Math.acos(i);return a},outOfChina:function(t,e){return e<72.004||e>137.8347||(t<.8293||t>55.8271)},transformLat:function(t,e){var s=2*t-100+3*e+.2*e*e+.1*t*e+.2*Math.sqrt(Math.abs(t));return s+=2*(20*Math.sin(6*t*this.PI)+20*Math.sin(2*t*this.PI))/3,s+=2*(20*Math.sin(e*this.PI)+40*Math.sin(e/3*this.PI))/3,s+=2*(160*Math.sin(e/12*this.PI)+320*Math.sin(e*this.PI/30))/3},transformLon:function(t,e){var s=300+t+2*e+.1*t*t+.1*t*e+.1*Math.sqrt(Math.abs(t));return s+=2*(20*Math.sin(6*t*this.PI)+20*Math.sin(2*t*this.PI))/3,s+=2*(20*Math.sin(t*this.PI)+40*Math.sin(t/3*this.PI))/3,s+=2*(150*Math.sin(t/12*this.PI)+300*Math.sin(t/30*this.PI))/3}};e.default=n},Q4d7:function(t,e,s){t.exports=s.p+"static/img/networkError.dbc7c3a.png"},Q9gf:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=s("dXPy");(n=i)&&n.__esModule;e.default={name:"basicHeader",data:function(){return{msg:"头部通用导航"}},methods:{goBack:function(){this.$router.back()},home:function(){this.$router.push({path:"/"})}},props:["desName"]}},Qm77:function(t,e,s){t.exports=s.p+"static/img/yubao.30dc662.png"},RMYl:function(t,e){},S1k5:function(t,e){},"TJ+l":function(t,e){},TSp4:function(t,e){},TeAX:function(t,e){},UAJA:function(t,e,s){t.exports=s.p+"static/img/mapPreview.25b1dd8.png"},UF78:function(t,e,s){"use strict";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mapBox"},[e("div",{staticClass:"map",attrs:{id:"mapApp"}}),this._v(" "),this.mapErrorFlag?e("div",{staticClass:"mapError",on:{click:this.refreshMap}},[e("img",{attrs:{src:s("Q4d7"),alt:""}})]):this._e()])},staticRenderFns:[]};e.a=n},UKbV:function(t,e){},W7vR:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("ODnJ"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("4duQ");var r=function(t){s("kVWh")},c=s("VU/8")(i.a,o.a,!1,r,"data-v-2656c22f",null);e.default=c.exports},X11a:function(t,e){},YZKZ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("m24p"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("uHqD");var r=function(t){s("Ap89")},c=s("VU/8")(i.a,o.a,!1,r,"data-v-109dbf93",null);e.default=c.exports},YaEn:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=v(s("7+uW")),i=v(s("/ocq")),a=v(s("lyB/")),o=v(s("uDie")),r=v(s("hA79")),c=v(s("ZZnp")),u=v(s("+bWZ")),l=v(s("dYyH")),d=v(s("daOw")),h=v(s("W7vR")),p=v(s("YZKZ")),f=v(s("GCac")),m=v(s("iknx"));function v(t){return t&&t.__esModule?t:{default:t}}n.default.use(i.default),e.default=new i.default({mode:"hash",routes:[{path:"/",name:"home",component:a.default},{path:"/index.html",name:"home",component:a.default},{path:"/buslist",name:"busList",component:o.default},{path:"/destation",name:"destation",component:r.default},{path:"/busmap",name:"busMap",component:c.default},{path:"/busDetail",name:"busDetail",component:u.default},{path:"/busMapPreview",name:"busMapPreview",component:l.default},{path:"/busLineMapPreview",name:"busLineMapPreview",component:d.default},{path:"/notice",name:"notice",component:h.default},{path:"/noticeInfo",name:"noticeInfo",component:p.default},{path:"/busLines",name:"busLines",component:f.default},{path:"/busLineInfo",name:"busLineInfo",component:m.default}]})},Z7VJ:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACVklEQVR4Xu2a0VXDMAxFnzaACWADygQwAkwAbMAobACdADYBJgA2YANx3OOUJk1iK5bspnE/W9fJvZZenLSEhb9o4fwoKoCZ7wFcEdFDqYUoJsDDP3vwl1ISigjowDeLX0RCdgED8MUkZBUQgC8iIZuASPjsErIIEMJnlWAuYCJ8NgmmAhLhs0gwE6AEby7BRIAyvKkEdQFG8GYSVAUYw5tIUBOQCV5dgoqAzPCqEpIFFIJXk5AkoDC8ioTJAg4EPlnCJAEK8D8AHgF8eIIVgCcAZwlPhiY9TxALUIJfEdHvLiwzn3ghWSWIBCjAO+ZbInrrW2lmvgHwmlAF7quiSogWoATvTvC0u/oNMDOfA/hKFCCSECVAET6XgGgJQQHK8DlaYLeAgu0wKsAA3p3cN4DLgRB8B+DaQPM1KmFQgBF8A+YkuMvgp3/jwl8GteGD+4ReAcbwmqsrmau3EvYEHCn8YCW0BBw5fK+ErYCFwO9J2AhYGHxLAi0U/l+CUMAawJ0keguMdf81aH52Dx1+LWmBNRHdMzOHZi35ORHFVvWGJzYEN4N9Xhy8gIhc2/LEXAa3g+ckYERCiye0EWoNnpuAHgl7PGNb4eum7Hd7eg4Z0M0gH/S9PMHb4Z7JZpEBsUFcBcSaasbNsQXGGGsF1AoQGqgtMIOtsGRNawZIbGnsBN3NytgxU1ssNH/32NkrIHSCVUBixoQE1wroGKgtUENQaMA6pKznrxlQM6BtoIagMALcr0hJT4RC12nr+WsGpGaAtGIOfbw4Aw4dSHp+VYDU2LGN/wMou4+JKEbxjQAAAABJRU5ErkJggg=="},ZZnp:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("H7zA"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("7GCb");var r=function(t){s("HG7d")},c=s("VU/8")(i.a,o.a,!1,r,null,null);e.default=c.exports},ah7P:function(t,e,s){"use strict";var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"previewBtn"},[e("img",{staticClass:"btn",attrs:{src:s("UAJA"),alt:""}})])}]};e.a=n},"bn/Q":function(t,e){},chka:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},i=u(s("Apws")),a=s("NYxO"),o=u(s("dXPy")),r=u(s("HR9g")),c=u(s("4dR6"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"busList",data:function(){return{msg:"路线详情",showLoading:!1,loadingText:"重新获取定位中...",showSameDirection:!1,showSameText:"起点和终点不能相同",showSameDirectionTimer:null,options:{},typeIndex:0,strategy:[{name:"推荐",type:1},{name:"步行少",type:3},{name:"少换乘",type:2},{name:"不坐地铁",type:5}],transits:[],currentLocation:"",origin:{},destination:{},searchType:0,searchStorage:null,searchStart:"",searchEnd:"",showSearchResult:!1,searchResultList:[]}},mounted:function(){this.options={name:decodeURI(this.$route.query.name),title:"线路推荐",address:decodeURI(this.$route.query.address),location:this.$route.query.location};var t=localStorage.getItem("searchStorage");if(t&&(t=JSON.parse(t),this.searchStorage=t.filter(function(t){return"wjgj"!=t.id}),this.searchStorage.unshift({name:"我的位置"}),this.searchStart="我的位置",this.searchEnd=this.options.name),this.$store.state.location_now)e=this.$store.state.location_now;else var e=localStorage.getItem("location_now");this.origin={name:"我的位置",location:e},this.destination={name:this.searchEnd,location:this.options.location},this.getRoutes(this.typeIndex)},components:{basicList:c.default,mapComponent:o.default},methods:n({},(0,a.mapMutations)(["changeNowLocation"]),{getRoutes:function(t){var e=this;this.showLoading=!0,this.loadingText="正在努力加载中...",this.showSearchResult=!1;var s={origin:this.origin.location,destination:this.destination.location,key:r.default.key,city:r.default.adname,strategy:this.strategy[t].type};this.typeIndex=t,i.default.getRoutesInfo(s,function(t){(t.data.info="OK")&&t.data.route?e.showRoutes(t.data.route.transits):e.showRoutes([]),e.showLoading=!1})},submitSearch:function(t){this.showSearchResult=!0,this.searchType=t;var e=0==t?this.searchStart:this.searchEnd,s=this,n={key:r.default.key,keywords:e,city:r.default.adcode,citylimit:!0,type:"15000|"};i.default.searchByKeyword(n,function(t){var e=[];if(!t.data)return this.searchResultList=[],!1;t.data.tips.forEach(function(t,s){t.location.length>0&&e.push(t)}),e.unshift({name:"我的位置"}),s.searchResultList=e})},inputFocus:function(t){this.searchType=t,0==t&&""==this.searchStart&&this.searchResultList.length<1?(this.searchResultList=this.searchStorage,this.showSearchResult=!0):1==t&&""==this.searchEnd&&this.searchResultList.length<1&&(this.searchResultList=this.searchStorage,this.showSearchResult=!0)},fillInput:function(t,e){switch(e){case 0:if(0==this.searchType&&"我的位置"==this.searchEnd)return this.searchStart="",this.dealSameDirection(),!1;if(1==this.searchType&&"我的位置"==this.searchStart)return this.searchEnd="",this.dealSameDirection(),!1;this.showLoading=!0,this.loadingText="重新获取定位中...",this.getCurrentLocation(t,e);break;default:0==this.searchType?(this.origin=t,this.searchStart=t.name):(this.destination=t,this.searchEnd=t.name),""!=this.searchStart&&""!=this.searchEnd&&this.checkSame()}},getCurrentLocation:function(){var t=this;AMap.plugin(["AMap.Geolocation"],function(){var e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new AMap.Pixel(10,20),showMarker:!0,markerOptions:{offset:new AMap.Pixel(-16,-16),content:'<img src="./static/images/location.png" style="width:36px;height:36px" id="locationIcon"/>'},showCircle:!1,panToLocation:!1,zoomToAccuracy:!1});e.getCurrentPosition(),AMap.event.addListener(e,"complete",function(e){var s=e.position.getLng(),n=e.position.getLat();t.currentLocation=s+","+n,0==t.searchType?(t.origin={name:"我的位置",location:t.currentLocation},t.searchStart=t.origin.name):(t.destination={name:"我的位置",location:t.currentLocation},t.searchStart=t.destination.name);t.showLoading=!1,""!=this.searchEnd&&""!=this.searchStart&&(t.getRoutes(t.typeIndex),t.showSearchResult=!1)}),AMap.event.addListener(e,"error",function(t){console.log(t)})})},checkSame:function(){0==this.searchType&&this.searchEnd==this.searchStart?(this.dealSameDirection(),this.searchStart=""):1==this.searchType&&this.searchEnd==this.searchStart?(this.dealSameDirection(),this.searchEnd=""):(this.showSearchResult=!1,this.getRoutes(this.typeIndex))},dealSameDirection:function(){var t=this;this.showSameText="起点和终点不能相同",this.showSameDirection=!0,this.showSameDirectionTimer&&clearTimeout(this.showSameDirectionTimer),this.showSameDirectionTimer=setTimeout(function(){t.showSameDirection=!1},2500)},switchDirection:function(){var t;t=this.origin,this.origin=this.destination,this.destination=t,this.searchStart=this.origin.name,this.searchEnd=this.destination.name,this.getRoutes(this.typeIndex)},showRoutes:function(t){this.transits=t},goBack:function(){this.$router.back()},home:function(){this.$router.push({path:"/"})},goBusMap:function(t){this.$router.push({path:"/busMap",query:{name:encodeURI(this.origin.name),address:encodeURI(this.destination.name),origin:this.origin.location,location:this.destination.location,type:this.strategy[this.typeIndex].type,focusIndex:t}})}}),filters:{}}},dVBe:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(s("Apws")),i=(u(s("HR9g")),u(s("rM89"))),a=u(s("4dR6")),o=u(s("q87W")),r=u(s("Ckdx")),c=(u(s("0xDb")),u(s("7t+N")),s("7QTg"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"busLineInfo",data:function(){return{userid:null,msg:"",code:"",options:{},activeIndex:0,yubaoTimer:null,swiperOption:{pagination:{el:".swiper-pagination"},activeIndex:0},busList:[],stationList:[],statinonIndex:null,showMessageNum:null,totastMaskShow:!1,totastContent:"",findBusInfo_timer:null,busLastSlon:[]}},mounted:function(){this.userid=localStorage.getItem("smUserId"),this.options={name:this.$route.query.lname+"路",lname:this.$route.query.lname,lguid:this.$route.query.lguid,isMain:this.$route.query.isMain,focusIndex:this.$route.query.focusIndex,slno:this.$route.query.slno||""},this.msg=this.options.name,this.options.focusIndex?this.activeIndex=Number(this.options.focusIndex):this.activeIndex=null,this.getBusList()},updated:function(){},methods:{getBusList:function(){var t=this,e={lname:this.options.lname,includeStation:!0};n.default.findChannelBySguids(e,function(s){t.busList=s.data.records,t.busList=t.busList.filter(function(t){return t.lname==e.lname}),t.activeIndex||t.busList.forEach(function(e,s){t.options.lguid!=e.lguid||(t.activeIndex=s)}),t.getStationList(),t.swiper.slideTo(t.activeIndex,0,function(){})})},getStationList:function(){var t=this;this.stationList=this.busList[this.activeIndex].station,this.statinonIndex=null,this.stationList.forEach(function(t,e){t.busIcon=!1}),this.options.slno&&(this.statinonIndex=Number(this.options.slno)-1),this.findBusInfo(),this.findBusInfo_timer&&(clearInterval(this.findBusInfo_timer),this.findBusInfo_timer=null),this.findBusInfo_timer=setInterval(function(){t.findBusInfo()},1e4)},goBusLineMapPreview:function(t){this.$router.push({path:"/busLineMapPreview",query:{lname:this.options.lname,lguid:this.busList[this.activeIndex].lguid,focusIndex:t}})},findBusInfo:function(){var t=this,e=[],s=(t.stationList,{lguids:this.busList[this.activeIndex].lguid});t.stationList.forEach(function(t,e){t.busIcon=!1}),n.default.findBusInfo(s,function(s){s.data.records.forEach(function(s,n){e.push(s.lastSlno),t.stationList[s.lastSlno-1]&&t.$set(t.stationList[s.lastSlno-1],"busIcon",!0)}),t.busLastSlon=e,t.$forceUpdate()})},slideChangeTransitionEnd:function(){this.activeIndex=this.swiper.activeIndex,this.getStationList()},stationFocus:function(t,e){this.statinonIndex=e;var s=t.slno,n=[];this.busLastSlon.forEach(function(t,e){t<=s&&n.push(s-t)}),n.length>0?this.showMessageNum=Math.min.apply(null,n):this.showMessageNum=null},showTotast:function(){this.showMessageNum>0?this.totastContent="距离您选中的车站，最近的车辆还有"+this.showMessageNum+"站到达。":0==this.showMessageNum?this.totastContent="车辆已经过本站，请抓紧时间乘车！":this.totastContent="暂未查询到发站的车辆！",this.totastMaskShow=!0},closeTotastMaskShow:function(){this.totastMaskShow=!1},sendMessage:function(){if(this.statinonIndex){var t=this.stationList[this.statinonIndex].slno,e=this;this.yubaoTimer?(clearInterval(this.yubaoTimer),this.yubaoTimer=null):this.yubaoTimer=setInterval(function(){var s=[];if(e.busLastSlon.forEach(function(e,n){e<=t&&s.push(t-e)}),s.length>0){var i=Math.min.apply(null,s);if(i>0&&i<=2){var a={title:"公交通知",text:"公交即将到站，请尽快赶到车站乘车！",toUserId:this.userid||"398483532575933416"};n.default.sendMsg2(a,function(t){e.totastContent="添加报站成功，请注意查询！",e.totastMaskShow=!0,clearInterval(e.yubaoTimer),e.yubaoTimer=null})}else if(0==i){a={title:"公交通知",text:"公交已经到站了，请注意抓紧时间乘车！",toUserId:this.userid||"398483532575933416"};n.default.sendMsg2(a,function(t){e.totastContent="添加报站成功，请注意查询！",e.totastMaskShow=!0,clearInterval(e.yubaoTimer),e.yubaoTimer=null})}}},1e3)}else this.totastContent="请先选择一个车站添加到报站工作台！",this.totastMaskShow=!0},callAlarme:function(){if(this.statinonIndex){var t=this.stationList[this.statinonIndex].slno,e=this.stationList[this.statinonIndex].lguid,s=this,i=[];s.busLastSlon.forEach(function(e,s){e<=t&&i.push(t-e)});var a=Math.min.apply(null,i);if(a>0&&a<=1)s.totastContent="车辆即将到达本站！",s.totastMaskShow=!0;else{var o={lguid:e,destIndex:t,forecastNumber:2,userId:this.userid||"398483532575933416"};n.default.callBusWarn(o,function(t){"success"==t.data.message&&(s.totastContent="设置成功！",s.totastMaskShow=!0)})}}else this.totastContent="请先选择一个车站添加到报站工作台！",this.totastMaskShow=!0}},components:{basicHeader:i.default,swiper:c.swiper,swiperSlide:c.swiperSlide,basicList:a.default,mapPreview:o.default,transcode:r.default},computed:{swiper:function(){return this.$refs.mySwiper.swiper}}}},dXPy:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("2VnK"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("UF78");var r=function(t){s("iNbN")},c=s("VU/8")(i.a,o.a,!1,r,null,null);e.default=c.exports},dYyH:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("kkBD"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("Exd9");var r=function(t){s("mbpZ")},c=s("VU/8")(i.a,o.a,!1,r,null,null);e.default=c.exports},daOw:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("ej+T"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("ujrL");var r=function(t){s("urRE")},c=s("VU/8")(i.a,o.a,!1,r,null,null);e.default=c.exports},dmK0:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),s=window.location.href.match(e);console.log("r",s);var n="";return null!=s&&(n=s[2]),e=null,s=null,null==n||""==n||"undefined"==n?"":n}},"ej+T":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(s("Apws")),i=c(s("0xDb")),a=(c(s("HR9g")),c(s("rM89"))),o=c(s("dXPy")),r=s("7QTg");function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"busLineMapPreview",data:function(){return{msg:"公交线路站台点标记",options:{},activeIndex:0,swiperOption:{navigation:{nextEl:".swiper-button-next1",prevEl:".swiper-button-prev1"},activeIndex:0},styleObject:{},busLines:[],stepIndex:0,steps:[],activeMark:null}},created:function(){},mounted:function(){this.options={name:"公交线路详情",lname:this.$route.query.lname,lguid:this.$route.query.lguid,focusIndex:this.$route.query.focusIndex},this.stepIndex=Number(this.options.focusIndex),this.getSteps()},methods:{getSteps:function(){var t=this,e={lguids:this.options.lguid,includeStation:!0};n.default.findChannelBySguids(e,function(e){t.steps=e.data.records[0].station,t.addMark(),t.drawBusLines(),t.drawActiveMark()})},addMark:function(){var t=this,e=this,s=[];this.steps.forEach(function(e,n){var a=new AMap.Icon({image:"./static/images/dot1x.png",size:new AMap.Size(12,12)}),o=i.default.transLocation.gcj_encrypt(e.lat,e.lon),r=new AMap.Marker({position:new AMap.LngLat(o.lon,o.lat),offset:new AMap.Pixel(-6,-6),icon:a,zoom:13,map:t.map,zIndex:10});s.push(r)}),this.$refs.mapObj.map.add(s),this.swiper.slideTo(this.stepIndex,0,function(){e.drawActiveMark()}),this.$refs.mapObj.map.setFitView()},drawBusLines:function(){var t=[];this.steps.forEach(function(e,s){var n=i.default.transLocation.gcj_encrypt(e.lat,e.lon);t.push([n.lon,n.lat])});var e=new AMap.Polyline({path:t,isOutline:!0,outlineColor:"white",strokeColor:"#37cabe",strokeOpacity:.8,lineJoin:"round",strokeWeight:6,zIndex:9});this.$refs.mapObj.map.add(e),this.$refs.mapObj.map.setFitView()},drawActiveMark:function(){this.activeMark&&this.$refs.mapObj.map.remove(this.activeMark);var t=new AMap.Icon({image:"./static/images/location2.png",size:new AMap.Size(48,48)}),e=i.default.transLocation.gcj_encrypt(this.steps[this.stepIndex].lat,this.steps[this.stepIndex].lon);this.activeMark=new AMap.Marker({position:new AMap.LngLat(e.lon,e.lat),offset:new AMap.Pixel(-24,-24),icon:t,zoom:13,zIndex:11}),this.$refs.mapObj.map.add(this.activeMark),this.$refs.mapObj.map.setFitView()},slideChangeTransitionEnd:function(){this.stepIndex=this.swiper.activeIndex,this.drawActiveMark()}},computed:{swiper:function(){return this.$refs.mySwiper.swiper}},components:{basicHeader:a.default,mapComponent:o.default,swiper:r.swiper,swiperSlide:r.swiperSlide},filters:{formatTime:function(t){var e=Math.ceil(t/60),s=Math.floor(e/60);return(s=s>0?s+"小时":"")+(e%60+"分钟")},formatDistance:function(t){return parseFloat(t/1e3).toFixed(2)+"km"}}}},fd6U:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAEBUlEQVRoQ+2aPUgcQRTH/7NHPKxFsLFIGiUGjGJhIVgYNHYq2FjY+AExARO0EAUL8auQJFeohWdhoY1gF4gSAoKghZ4JxkSbELQRxC7xULid8OZuj/UuOrO7c+dx2ak8nH3zfu9r3s4OQ8rgVVWPTca6ATQDeAggmDonx35fAfgJ4KPBeZjt73+368esH7yiosAMBt8CeAHAyDEIVXVMAAtGMPiGbW9H6SEBSHA8GPzAgWeqknJ5HgM+s6urZnZ4eC0AY9XVswD6cllpF7rNBiKRV4xXVlaYgcBXAAEXQnL5kZgRi1WyWHX1OwCvc1lTD7q9J8AfAMo9CMnlR48IkMpsQTa0NFZWgLIy4PgYZkdHNpa8JkCejZVojXsAhA+o07u+B3VaMyHLD1HRz3V1ASUlnu3L6uuBoiLg4gJ8c9OzPJydgS8u3ilHyYPJ3PGukl4JCtuND6jT5H4V1WlNv4pmwJp+iGbAqEpVVNe6vgd1WdImx/eg3ajG3l4GbOxOJB8eBl9flz7syIN5D8iamqQWS5tQXw/x3MUFcHkJlJYCp6fxv8vK4l5w0XjzSAQ4P5fq48iDUmmpE4qLYSwvizcIPjcH1tCQPJPhS0tgk5NANAqztVVJWcfr05tQJs9k2MgIWFub8J7Z2Jh2JsPCYbCqKvD9ffBu+hyif2QOsLYWxiwdmANWQUjbB8vLYYTDQGEh+PQ0+OqqdsLMAFJoLiyIfLN7518bPevvB+vsjIfq4CCws6MVMiOALBQCq6tLy6/bOhkrVKn4mD09WvNRO2DSI7bQtFxya6tmK0a6IbUC0tkN64t/pOJra+ATEzfC7c5elHJ2Zkbko05IbYA34La2wPv703JJ2mzbCpMuSC2Adri7FJMCJk7wrCgQsqanPRUez4C0WSc7HEmRUAEkt98wWDQKHgq53kLcAxYXg01NiY1aDIUKqAoo5Nlz8pacVtlPXAGSx9jAQPwQlxannBsfl5Z3R4AW5NhYch1hxKEh4OhIhU3McQZIXuvtjbdfiUHNMnUqKsMxIAm1NQ1iDQrZ1VURtipDGTDVa2Ihh7nhCjBBcSPXEynB5+el74RyQOoXR0fjbwHWoCNzCh0HoUKPegEU4dbeDmokxF5pRZCkh5UCJt8IXIRHagh5BRTy7MWNcrKl5c5IlQIKy29sgJ+cgFOn4dBr9tW1AFoh294OfnAg1UcJkKym8vYsS3qdgLK1rP+rAapKk8zzATUZ0i4mqx5MfilW+DKrizWrF4F0Ke1Azu/8vsrF2CEB5vNlvBDjNTVPTNP8kpfXKQ3jaT5fiJ0LRCIv/48rzVSV8vpSur3sJq449wB4DuARgAcOyvJ9TP0Dxn6B80+GYYTZ7u43uxJ/AVvfh3C5M127AAAAAElFTkSuQmCC"},fgar:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(s("7biW")),i=(c(s("gdx1")),c(s("dXPy"))),a=c(s("HR9g")),o=c(s("0xDb")),r=c(s("Apws"));function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}e.default={name:"home",data:function(){var t;return u(t={code:null,showFriend_tips:!0,dataFrom:"home",showTouchPos:!1,touchMark:null,touchResult:null,showChannel:!1},"showFriend_tips",!1),u(t,"stationInfo",{}),u(t,"stationMark",[]),u(t,"stationIcon",[]),u(t,"walkLine",null),u(t,"origin",""),u(t,"destination",""),u(t,"newestMessage",null),u(t,"currentMarkIndex",0),u(t,"lastMarkIndex",0),u(t,"noRead",!0),u(t,"touchTime",0),t},created:function(){},mounted:function(){this.code=window.location.search.substr(1).split("=")[1];var t=localStorage.getItem("smcode");this.code&&this.code!==t?localStorage.setItem("smcode",this.code):this.code=t,setTimeout(function(){self.showFriend_tips=!1},3e3),this.getUserid(),this.ggjt_list(),this.mapListener()},methods:{searchStation:function(){var t=this;if(this.$store.state.location_now)e=this.$store.state.location_now;else var e=localStorage.getItem("location_now");this.origin=e;var s=o.default.transLocation.gcj_decrypt(e.split(",")[1],e.split(",")[0]),n={lon:s.lon,lat:s.lat,range:500};r.default.searchStationByRange(n,function(e){t.stationMark=e.data.record.slice(0,10),t.drawStationMark()})},drawStationMark:function(){var t=this;this.stationIcon.length>0&&this.clearStationMark();var e=this;this.stationMark.forEach(function(s,n){if(e.currentMarkIndex!=e.lastMarkIndex&&n==e.currentMarkIndex)var i=new AMap.Icon({size:new AMap.Size(29,39),image:"./static/images/red.png",imageSize:new AMap.Size(29,39)});else i=new AMap.Icon({size:new AMap.Size(29,39),image:"./static/images/green.png",imageSize:new AMap.Size(29,39)});var a=o.default.transLocation.gcj_encrypt(t.stationMark[n].lat,t.stationMark[n].lon),c=new AMap.Marker({position:new AMap.LngLat(a.lon,a.lat),icon:i,offset:new AMap.Pixel(-15,-20)});c.index=n,c.on("click",function(t){var s=t.target.index;e.showChannel=!0;var n={sguids:e.stationMark[s].sguid};r.default.findChannelBySguids(n,function(t){e.lastMarkIndex=e.currentMarkIndex,e.currentMarkIndex=s,e.drawStationMark(),e.showChannelInfo(t.data.records,s)})}),e.stationIcon.push(c)}),this.$refs.mapObj.map.add(e.stationIcon),this.$refs.mapObj.map.setFitView(e.stationIcon)},clearStationMark:function(){this.$refs.mapObj.map.remove(this.stationIcon),this.stationIcon=[]},showChannelInfo:function(t,e){for(var s="",n=0;n<t.length;n++)s+=t[n].lname+"路;";this.stationInfo={name:this.stationMark[e].sname,channels:s,dataIndex:e}},getWalking:function(){var t=this,e=o.default.transLocation.gcj_encrypt(this.stationMark[this.stationInfo.dataIndex].lat,this.stationMark[this.stationInfo.dataIndex].lon),s=e.lon+","+e.lat,n={origin:this.origin,destination:s,key:a.default.key};this.destination=s,r.default.getWalkingInfo(n,function(e){t.drawWalkingPath(e.data),t.drawStartAndEnd()})},drawWalkingPath:function(t){this.walkLine&&this.clearWalkingPath();var e,s=[],n="";t.route.paths[0].steps.forEach(function(t,e){n+=t.polyline+";"});var i=(n=n.substr(0,n.length-1)).split(";");s.push([this.origin.split(",")[0],this.origin.split(",")[1]]);for(var a=0;a<i.length;a++)s.push([i[a].split(",")[0],i[a].split(",")[1]]);s.push([this.destination.split(",")[0],this.destination.split(",")[1]]),e=new AMap.Polyline({path:s,isOutline:!0,outlineColor:"#ffeeee",borderWeight:2,strokeWeight:5,strokeColor:"#37cabe",lineJoin:"round",strokeStyle:"dashed",zIndex:10}),this.walkLine=e,this.$refs.mapObj.map.add(e),this.$refs.mapObj.map.setFitView([e])},clearWalkingPath:function(){this.$refs.mapObj.map.remove(this.walkLine)},ggjt_list:function(){var t=this;r.default.ggjt_list({pageIndex:1,pageSize:1},function(e){var s=localStorage.getItem("newestId")||null;t.newestMessage=e.data.result.list[0],s==t.newestMessage.id?t.noRead=!1:t.noRead=!0})},goNotice:function(t){localStorage.setItem("newestId",t),this.$router.push({path:"/notice"})},getUserid:function(){var t=localStorage.getItem("smcode"),e={client_id:a.default.smAppid,client_secret:a.default.smAppSecret,code:t,grant_type:"authorization_code",redirect_uri:a.default.redirect_uri};r.default.getSmToken2(e,function(t){if(t.access_token){var e={token:t.access_token};r.default.getSmUserid2(e,function(t){var e=o.default.getCorrectNum(t);e.userId?localStorage.setItem("smUserId",e.userId):console.log("获取userId失败")})}else console.log("获取token失败")})},closeFriend_tips:function(){this.showFriend_tips=!1},mapListener:function(){var t=this;this.$refs.mapObj.map.on("touchstart",function(e){t.showTouchPos=!1,t.showChannel=!1,document.querySelectorAll(".amap-geolocation-con")[0].style.display="block",t.touchMark&&t.clearTouchIcon(),t.touchTime=(new Date).getTime()}),this.$refs.mapObj.map.on("touchend",function(e){if((new Date).getTime()-t.touchTime>500){var s=e.lnglat.getLng(),n=e.lnglat.getLat(),i={key:a.default.key,location:s+","+n};r.default.searchRege(i,function(e){var i=e.data.regeocode,a=(i.formatted_address,i.addressComponent.province),o=i.addressComponent.city,r=i.formatted_address.replace(a,"");r=r.replace(o,""),i.formatted_address=r,i.addressNum=i.addressComponent.streetNumber.street+i.addressComponent.streetNumber.number,t.touchResult=i,t.showTouchPos=!0,document.querySelectorAll(".amap-geolocation-con")[0].style.display="none",t.drawTouchIcon(s,n)})}})},goDestation:function(){var t=this.touchResult.addressComponent.streetNumber.location;this.$router.push({path:"/destation",query:{name:encodeURI(this.touchResult.formatted_address),address:encodeURI(this.touchResult.addressNum),location:t}})},drawTouchIcon:function(t,e){this.touchMark&&this.clearTouchIcon();var s=new AMap.Icon({size:new AMap.Size(29,39),image:"./static/images/endIcon.png",imageSize:new AMap.Size(29,39)});this.touchMark=new AMap.Marker({position:new AMap.LngLat(t,e),icon:s,offset:new AMap.Pixel(-15,-20)}),this.$refs.mapObj.map.add(this.touchMark)},clearTouchIcon:function(){this.$refs.mapObj.map.remove(this.touchMark),this.touchMark=null}},components:{search:n.default,mapComponent:i.default}}},fpCY:function(t,e){},fxyu:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"busLines-info"},[n("transcode",{staticClass:"transCode"}),t._v(" "),n("div",{staticClass:"buslines-header"},[n("basicHeader",{attrs:{desName:t.msg}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.busList.length>0,expression:"busList.length > 0"}],staticClass:"buslines-swiper"},[n("swiper",{ref:"mySwiper",attrs:{options:t.swiperOption},on:{slideChangeTransitionEnd:t.slideChangeTransitionEnd}},[t._l(t.busList,function(e,i){return n("swiper-slide",{key:i},[n("div",{staticClass:"listbox"},[n("div",{staticClass:"list-item"},[n("div",{staticClass:"direction"},[n("span",[t._v(t._s(e.station[0].sname))]),t._v(" "),n("i",{staticClass:"icon-wj_ic_diraction"}),t._v(" "),n("span",[t._v(t._s(e.station[e.station.length-1].sname))])]),t._v(" "),n("div",{staticClass:"bustimes"},[n("div",[n("img",{attrs:{src:s("igwD"),alt:""}}),t._v(" "),n("span",[t._v(t._s(e.lfstdftime))])]),t._v(" "),n("div",[n("img",{attrs:{src:s("fd6U"),alt:""}}),t._v(" "),n("span",[t._v(t._s(e.lfstdetime))])]),t._v(" "),e.station[0].price?n("div",[n("span",[t._v(".")]),t._v(" "),n("span",[t._v("票价"+t._s(e.station[0].price)+"元")])]):t._e()])]),t._v(" "),n("div",{staticClass:"mapPreview",on:{click:function(e){t.goBusLineMapPreview(0)}}},[n("mapPreview")],1),t._v(" "),n("div",{staticClass:"yubao",on:{click:t.callAlarme}},[n("img",{attrs:{src:s("Qm77"),alt:""}})])])])}),t._v(" "),n("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)],1),t._v(" "),n("div",{staticClass:"buslines-content"},[n("ul",t._l(t.stationList,function(e,s){return n("li",{key:s,class:{hasBusIcon:e.busIcon,active:t.statinonIndex===s},on:{click:function(n){t.stationFocus(e,s)}}},[n("p",{class:{active:t.statinonIndex===s}},[t._v(t._s(e.sname))])])}),0)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.totastMaskShow,expression:"totastMaskShow"}],staticClass:"buslines-totast-mask"},[n("div",{staticClass:"buslines-totast"},[n("p",[t._v(t._s(t.totastContent))]),t._v(" "),n("div",{on:{click:t.closeTotastMaskShow}},[t._v("知道了")])])])],1)},staticRenderFns:[]};e.a=n},gdx1:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("yN5e"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("t81f");var r=function(t){s("lUWj")},c=s("VU/8")(i.a,o.a,!1,r,"data-v-65752dde",null);e.default=c.exports},hA79:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("C9wk"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("2GkE");var r=function(t){s("UKbV")},c=s("VU/8")(i.a,o.a,!1,r,null,null);e.default=c.exports},iEWo:function(module,exports,__webpack_require__){"use strict";function getRealJsonData(baseStr){if(baseStr&&"string"==typeof baseStr){var jsonData=null;try{jsonData=JSON.parse(baseStr)}catch(t){return null}var needReplaceStrs=[];loopFindArrOrObj(jsonData,needReplaceStrs),needReplaceStrs.forEach(function(replaceInfo){var matchArr=baseStr.match(eval('/"'+replaceInfo.key+'":[0-9]{15,}/'));if(matchArr){var str=matchArr[0],replaceStr=str.replace('"'+replaceInfo.key+'":','"'+replaceInfo.key+'":"');replaceStr+='"',baseStr=baseStr.replace(str,replaceStr)}});var returnJson=null;try{returnJson=JSON.parse(baseStr)}catch(t){return null}return returnJson}}function getNeedRpStrByObj(t,e){for(var s in t){var n=t[s];"number"==typeof n&&n>9007199254740992&&e.push({key:s}),loopFindArrOrObj(n,e)}}function getNeedRpStrByArr(t,e){for(var s=0;s<t.length;s++){loopFindArrOrObj(t[s],e)}}function loopFindArrOrObj(t,e){var s=Object.prototype.toString.call(t);"[object Object]"==s&&e.concat(getNeedRpStrByObj(t,e)),"[object Array]"==s&&e.concat(getNeedRpStrByArr(t,e))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=getRealJsonData},iNbN:function(t,e){},igwD:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAADl0lEQVRoQ+1aSUxTURQ9r9VigDI0CASDioBoQcEFoSG6cFhIjHFInGLcOYBKooalO10ahwWCykJDCAkmGhdEEqeFhtSZBkGigihikBAGS6tt6H/mfSkpBOj7Qwe//++a3nvfOe/envv6/iWY8cTba60GSg4TgjIQZIEiZqZNVH0m8ICih1K0CITWjdvKOwPxkakPHU2mJOfIRQpUADBEFQl+MAKAG2bBdfpb6ZlfzO0vwY4mU6JzpBnAFv5Y0WxJH4+ZLWXI3+sVCSbaa6sBcjyaIUvFRoDqUduxk8Ty4nq+T6AOAEapQaLc3mc0kEKSYL92iQCnohysLHgUuEwS7dfeA1glK0L0O3Uxgh4AJqVYt8WlYv/iPKw1p6Ow/bbscI41e9DjHkbdQDuaXYOy40w6ehlBqjQK86+05OBc7iYx1IXPz3B+cFo74lpCjRgzF1KNIAvMdn9ZbDKGvC7kvG3gIhVo9CCvDMVJmXD7vMh4dVOy/2wOqhI8m2pFVdZ6cZ3KrvuoH+vjBmmLSURL0T7RvvG7AxV9z7l95zNUlSBb6NO6g0gxxeHJUDd2dT/iBnk3ezM2pmSL2Stta0TvBJMG5Y/qBOuXb8D2tNWSyixU2WPbw0WQgc6OtXBtZ5zRJP4O2fPFPQKXzxvULzUmXsy6FB9m2+0exqHep/PG5yLYat0BqzktKNBwG3Q6f6C0855ygkw8lsSYFeM/kFE4laXW0a+K4/V7nEHbEVcGFSOZDDBaclR1lQyGLWwE2UmnoWCnrBYSjERY28RciwWeUope31KtDQQjH7YM+tuH3FNOMCJzfS+bICs5ywL+65qqpTaxfTDlq+l/Ixnv8IRH1uFbNsFwtw6eljDbrukE56olfwbVPBjPtlZNZglY/4xYBnWCkuVkuoOewSAbqFhkNF+irHEPesYVFuLc7v6/UhETmZAxmxE4YgTZ1cSdoQ8h47k7ZaV4lRExgpr/DeoEFRav3gdD3Qc1LzIKK5DbPWIqqvlGr6sodxHObqiraKhVVC/Rf71ENa+iChPE7R6xPsgWdjgHuIFKNSw0p4uv7iJGULMi47+6//j7J+yeMamJ4bZnr7dzFyVAydW9KoNA3IjDaziu6VEuCnRofBiPXiHJL2sKBJ+hTYvjlAajUKTZgViAXh2zlZ/4P0aaRWHT9FB6gHSzEecJQThCQLYCWAFgYXiVXfJqLgr0AvSh0UjrRoor3gVG+AOHxpFBu3IEpAAAAABJRU5ErkJggg=="},iknx:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("dVBe"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("fxyu");var r=function(t){s("X11a")},c=s("VU/8")(i.a,o.a,!1,r,"data-v-df8c33a6",null);e.default=c.exports},jyS4:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"searchHeader"},[t.nosearch?n("div",{staticClass:"noSearchList"},[n("img",{attrs:{src:s("qOcj"),alt:""}})]):t._e(),t._v(" "),n("div",{staticClass:"searchBox"},[n("div",{staticClass:"searchIcon icon-wj_ic_search"}),t._v(" "),n("form",{attrs:{id:"myform",action:"",onsubmit:"return false;"}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchContent,expression:"searchContent",modifiers:{trim:!0}}],attrs:{type:"search",placeholder:"请输入目的地或者公交线路"},domProps:{value:t.searchContent},on:{input:[function(e){e.target.composing||(t.searchContent=e.target.value.trim())},t.submitSearch],focus:t.inputFocus,blur:[t.inputBlur,function(e){t.$forceUpdate()}]}})])]),t._v(" "),n("button",{staticClass:"btn"},[t._v("搜索")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.historyList&&t.historyList.length>0&&t.showList,expression:"historyList && historyList.length>0&&showList"}],staticClass:"historyList"},[n("ul",{staticClass:"lists"},t._l(t.historyList,function(e,s){return n("li",{key:s,staticClass:"listItem",on:{click:function(s){t.goDestation(e)}}},[n("p",[n("span",{staticClass:"ico-wj",class:{"icon-wj_ic_bus":"wjgj"==e.id,"icon-wj_ic_point":"wjgj"!=e.id}}),t._v(" "),n("span",[t._v(t._s(e.name))])])])}),0),t._v(" "),n("div",{staticClass:"clear"},[t.searchContent?t._e():n("p",{on:{click:t.hideList}},[t._v("取消")]),t._v(" "),n("p",{on:{click:function(e){t.clearList()}}},[t._v(t._s(t.clearMsg))])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.nosearch,expression:"nosearch"}],staticClass:"noSearchList",on:{click:t.hideNosearch}},[n("img",{attrs:{src:s("qOcj"),alt:""}}),t._v(" "),n("p",[t._v("取消")])])])},staticRenderFns:[]};e.a=n},kVWh:function(t,e){},kkBD:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=u(s("Apws")),a=u(s("HR9g")),o=u(s("rM89")),r=u(s("dXPy")),c=s("7QTg");function u(t){return t&&t.__esModule?t:{default:t}}e.default={name:"busMapPreview",data:function(){return{msg:"bus地图",options:{},activeIndex:0,swiperOption:{navigation:{nextEl:".swiper-button-next1",prevEl:".swiper-button-prev1"},activeIndex:0},origin:"",destination:"",styleObject:{},walkLines:[],busLines:[],transits:[],mysegments:[],stepIndex:0,steps:[],activeShowLine:null}},created:function(){},mounted:function(){this.options={name:decodeURI(this.$route.query.name),address:decodeURI(this.$route.query.address),location:this.$route.query.location,origin:this.$route.query.origin,id:this.$route.query.id,type:this.$route.query.type,activeIndex:this.$route.query.activeIndex,index:this.$route.query.index,point:this.$route.query.point},this.destination=this.$route.query.location,this.getRoutes(this.options.type)},methods:{getRoutes:function(t){var e=this,s={origin:this.options.origin,destination:this.options.location,key:a.default.key,city:a.default.adname,strategy:this.options.type};i.default.getRoutesInfo(s,function(t){e.showRoutes(t.data.route.transits)})},showRoutes:function(t){this.transits=t,this.getMysegments(),this.drawStartAndEnd(),this.drawbusLine(t[this.options.activeIndex])},getMysegments:function(){var t=[];this.transits[this.options.activeIndex].segments.forEach(function(e,s){var n={};e.walking.steps&&e.walking.distance>=50&&(n.walking=e.walking),e.bus.buslines.length>0&&(n.buslines=e.bus.buslines),t.push(n)}),this.mysegments=t,this.getSteps(this.mysegments)},addMark:function(t){var e=new AMap.Icon({size:new AMap.Size(29,35),image:"./static/images/mark0.png",imageSize:new AMap.Size(29,35)}),s=new AMap.Marker({position:new AMap.LngLat(t.split(",")[0],t.split(",")[1]),offset:new AMap.Pixel(-10,-10),icon:e,title:"010",zoom:13,map:this.map});this.$refs.mapObj.map.add([s]),this.$refs.mapObj.map.setFitView([s])},drawbusLine:function(t){try{var e=this;this.walkLines.forEach(function(t,s){e.$refs.mapObj.map.remove(t)})}catch(t){}this.getpolyline(t)},drawStartAndEnd:function(t){var e=new AMap.Icon({size:new AMap.Size(29,35),image:"./static/images/startIcon.png",imageSize:new AMap.Size(29,35)}),s=new AMap.Marker({position:new AMap.LngLat(this.origin.split(",")[0],this.origin.split(",")[1]),offset:new AMap.Pixel(-15,-18),icon:e,zoom:13}),n=new AMap.Icon({size:new AMap.Size(29,35),image:"./static/images/endIcon.png",imageSize:new AMap.Size(29,35)}),i=new AMap.Marker({position:new AMap.LngLat(this.destination.split(",")[0],this.destination.split(",")[1]),offset:new AMap.Pixel(-15,-18),icon:n,zoom:13});this.$refs.mapObj.map.add([s,i]),this.$refs.mapObj.map.setFitView()},getpolyline:function(t){var e=this;t.segments.forEach(function(t,s){if(t.walking){var n=[],i=null;if(t.walking.steps){for(var a=0;a<t.walking.steps.length;a++)for(var o=t.walking.steps[a].polyline.split(";"),r=0;r<o.length;r++)n.push([o[r].split(",")[0],o[r].split(",")[1]]);i=new AMap.Polyline({path:n,isOutline:!0,outlineColor:"#ffeeee",borderWeight:2,strokeWeight:5,strokeColor:"#37cabe",lineJoin:"round",strokeStyle:"dashed",zIndex:10}),e.walkLines.push(i),e.$refs.mapObj.map.add(i)}}if(t.bus.buslines.length>0){var c,u=[];t.bus.buslines[0].polyline.split(";").forEach(function(t,e){u.push([t.split(",")[0],t.split(",")[1]])}),c=new AMap.Polyline({path:u,isOutline:!0,outlineColor:"white",strokeColor:"#37cabe",strokeOpacity:.5,lineJoin:"round",strokeWeight:6,zIndex:9}),e.walkLines.push(c),e.$refs.mapObj.map.add(c)}e.$refs.mapObj.map.setFitView()})},getSteps:function(t){var e=this,s=this,n=[];n.push({desc:this.options.name,distance:""}),"start"==s.options.point&&(s.stepIndex=0),t.forEach(function(t,i){if(t.walking){if(t.buslines)s.showSame(t,i)?n.push({desc:"站内换乘"+t.walking.distance+"m",distance:"",draw:t.walking.steps}):n.push({desc:"步行到"+t.buslines[0].departure_stop.name,distance:t.walking.distance+"m",draw:t.walking.steps});else n.push({desc:"步行"+t.walking.distance+"m",distance:"",draw:t.walking.steps});"walking"==s.options.point&&e.options.index==i&&(s.stepIndex=n.length-1)}t.buslines&&(n.push({desc:t.buslines[0].name,distance:"从"+t.buslines[0].departure_stop.name+"到"+t.buslines[0].arrival_stop.name,draw:t.buslines[0].polyline}),"busline"==s.options.point&&e.options.index==i&&(s.stepIndex=n.length-1))}),n.push({desc:"到达"+this.options.address,distance:""}),"end"==s.options.point&&(s.stepIndex=n.length-1),this.steps=n,s.swiper.slideTo(s.stepIndex,0,function(){})},showSame:function(t,e){return 0==e?"":t.buslines[0].departure_stop.name==this.mysegments[e-1].buslines[0].arrival_stop.name?"同站换乘":""},slideChangeTransitionEnd:function(){this.stepIndex=this.swiper.activeIndex,this.reDrawLine(this.steps[this.stepIndex].draw)},reDrawLine:function(t){switch(void 0===t?"undefined":n(t)){case"undefined":break;case"object":var e="",s=[];t.forEach(function(t,s){e+=";"+t.polyline}),(e=e.substr(1)).split(";").forEach(function(t,e){s.push([t.split(",")[0],t.split(",")[1]])}),this.drawCurrentLine(s);break;case"string":s=[];t.split(";").forEach(function(t,e){s.push([t.split(",")[0],t.split(",")[1]])}),this.drawCurrentLine(s)}},drawCurrentLine:function(t){this.activeShowLine&&this.$refs.mapObj.map.remove(this.activeShowLine),this.activeShowLine=new AMap.Polyline({path:t,isOutline:!0,outlineColor:"white",strokeColor:"red",strokeOpacity:.5,lineJoin:"round",strokeWeight:6,zIndex:12}),this.$refs.mapObj.map.add(this.activeShowLine),this.$refs.mapObj.map.setFitView(this.activeShowLine)}},computed:{swiper:function(){return this.$refs.mySwiper.swiper}},components:{basicHeader:o.default,mapComponent:r.default,swiper:c.swiper,swiperSlide:c.swiperSlide},filters:{formatTime:function(t){var e=Math.ceil(t/60),s=Math.floor(e/60);return(s=s>0?s+"小时":"")+(e%60+"分钟")},formatDistance:function(t){return parseFloat(t/1e3).toFixed(2)+"km"}}}},l3BQ:function(t,e){},lUWj:function(t,e){},"lyB/":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("fgar"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("yfwo");var r=function(t){s("fpCY")},c=s("VU/8")(i.a,o.a,!1,r,null,null);e.default=c.exports},m24p:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(s("rM89")),i=a(s("Apws"));function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:"noticeInfo",data:function(){return{msg:"通知详情",id:null,hackReset:!0,imgUrl:[]}},mounted:function(){this.msg=this.$route.query.title,this.id=this.$route.query.id,this.getInfo()},methods:{getInfo:function(){var t,e=this;i.default.ggjt_info(this.id,function(s){t=s.data.result.imgUrls,e.imgUrl=t,e.$nextTick(function(){e.hackReset=!0})})}},components:{basicHeader:n.default}}},mbpZ:function(t,e){},q87W:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("wPzD"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("ah7P");var r=function(t){s("TJ+l")},c=s("VU/8")(i.a,o.a,!1,r,"data-v-b7b2e61e",null);e.default=c.exports},qOcj:function(t,e,s){t.exports=s.p+"static/img/nosearch.ff95d84.png"},rM89:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Q9gf"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("yoqB");var r=function(t){s("Fg5d")},c=s("VU/8")(i.a,o.a,!1,r,null,null);e.default=c.exports},rRp2:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(s("Apws")),i=d(s("7t+N")),a=d(s("HR9g")),o=d(s("rM89")),r=d(s("4dR6")),c=d(s("q87W")),u=d(s("Ckdx")),l=s("7QTg");function d(t){return t&&t.__esModule?t:{default:t}}e.default={name:"busDetail",data:function(){return{msg:"换乘方案",options:{},activeIndex:0,swiperOption:{pagination:{el:".swiper-pagination"},activeIndex:0},transits:[],segments:[],mysegments:[],showFlags:[]}},created:function(){},mounted:function(){this.options={name:decodeURI(this.$route.query.name),address:decodeURI(this.$route.query.address),location:this.$route.query.location,origin:this.$route.query.origin,type:this.$route.query.type,focusIndex:this.$route.query.focusIndex},this.destination=this.$route.query.location,this.activeIndex=this.options.focusIndex,this.getRoutes(this.options.type)},methods:{getRoutes:function(t){var e=this,s={origin:this.options.origin,destination:this.options.location,key:a.default.key,city:a.default.adname,strategy:t};n.default.getRoutesInfo(s,function(t){e.transits=t.data.route.transits,e.swiper.slideTo(e.activeIndex,0,function(){}),e.getMysegments()})},slideChangeTransitionEnd:function(){this.activeIndex=this.swiper.activeIndex,this.getMysegments()},getMysegments:function(){var t=this,e=[],s=[],n=[],a=0,o=0;this.transits[this.activeIndex].segments.forEach(function(r,c){var u={};if(r.walking.steps&&r.walking.distance>=50&&(u.walking=r.walking),r.bus.buslines.length>0){u.buslines=r.bus.buslines,(n=u.buslines[0].via_stops).push(u.buslines[0].arrival_stop),n.unshift(u.buslines[0].departure_stop),a+=n.length,u.via_stops_modify=n;var l=u.buslines[0].name,d=/[1-9][0-9]*/g;l=l.match(d)?l.match(d)[0]:l;var h=n,p="/wjtran/channel/match?lname="+l+"&fromSname="+h[0].name+"&toSname="+h[h.length-1].name;i.default.ajax({url:p,type:"GET",async:!1,success:function(t){if(0==t.code)var e=t.record.station;else e=[];var s=null,i=null;if(e.forEach(function(t,e){t.sname==n[0].name&&(s=e),t.sname==n[n.length-1].name&&(i=e)}),s&&i){for(var a=[],r=s;r<=i;r++)a.push({name:e[r].sname,slno:e[r].slno,price:e[r].price,lguid:e[r].lguid,sguid:e[r].sguid,lfstdftime:t.record.lfstdftime,lfstdetime:t.record.lfstdetime,isMain:t.record.isMain,lname:t.record.lname});u.via_stops_modify=a}o+=u.via_stops_modify.length},error:function(t){}})}a==o?t.$set(t.transits[t.activeIndex],"totalStations",a):a!=o&&0!=o?t.$set(t.transits[t.activeIndex],"totalStations",o):t.$set(t.transits[t.activeIndex],"totalStations",a),e.push(!1),s.push(u)}),this.showFlags=e,this.mysegments=s},getBusList_wjgj:function(t,e){var s=(t=t.buslines[0]).name,i={lname:s=s.substr(0,s.indexOf("路")),fromSname:e[0].name,toSname:e[e.length-1].name};n.default.matchChannel(i,function(t){t.data.code})},findBusInfo:function(t){var e=t.slno,s="/wjtran/busInfo/find?lguids="+t.lguid,n=[];return i.default.ajax({url:s,async:!1,success:function(t){t.records.forEach(function(t,s){var i;t.lastSlno<=e&&(i=e-t.lastSlno,n.push(i))})}}),n.length>0?Math.min.apply(null,n):e},startName:function(t,e){return 0==e?this.options.name:e>0?null:void 0},departure_stop:function(t,e){return"buslines"in t&&t.buslines[0].departure_stop.name},showSame:function(t,e){return 0==e?"上车":t.buslines[0].departure_stop.name==this.mysegments[e-1].buslines[0].arrival_stop.name?"同站换乘":"上车"},transformFlag:function(t){this.$set(this.showFlags,t,!this.showFlags[t])},goBusMapPreview:function(t,e){this.$router.push({path:"/busMapPreview",query:{name:encodeURI(this.options.name),address:encodeURI(this.options.address),location:this.options.location,origin:this.options.origin,id:this.options.id,type:this.options.type,activeIndex:this.activeIndex,index:t,point:e}})},goBusMapPreviewOrBusLineInfo:function(t,e,s){var n=s.via_stops_modify[0];n.lguid?this.$router.push({path:"/busLineInfo",query:{name:n.lname+"路",lname:n.lname,lguid:n.lguid,isMain:n.isMain,focusIndex:"",slno:n.slno}}):this.goBusMapPreview(t,e)}},computed:{swiper:function(){return this.$refs.mySwiper.swiper},via_stops:function(){return this.mysegments}},watch:{},components:{basicHeader:o.default,swiper:l.swiper,swiperSlide:l.swiperSlide,basicList:r.default,mapPreview:c.default,transcode:u.default},filters:{formatDistance:function(t){if(t.walking)return"步行"+t.walking.distance+"m"},formatStationName:function(t,e){return 0==t?"上车":t==e.length-1?"下车":""}}}},rtOn:function(t,e){},t81f:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return this.$store.state.historyList&&this.$store.state.historyList.length>0?s("div",{staticClass:"historyList"},[s("ul",{staticClass:"lists"},t._l(this.$store.state.historyList,function(e,n){return s("li",{key:n,staticClass:"listItem",on:{click:function(s){t.goDestation(e)}}},[s("p",[t._v(t._s(e.name))])])}),0),t._v(" "),s("div",{staticClass:"clear",on:{click:function(e){t.clearList()}}},[t._v(t._s(t.clearMsg))])]):t._e()},staticRenderFns:[]};e.a=n},uDie:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("chka"),i=s.n(n);for(var a in n)"default"!==a&&function(t){s.d(e,t,function(){return n[t]})}(a);var o=s("Ae9V");var r=function(t){s("l3BQ")},c=s("VU/8")(i.a,o.a,!1,r,"data-v-30d0738d",null);e.default=c.exports},uHqD:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"noticeInfo"},[s("basicHeader",{attrs:{desName:t.msg}}),t._v(" "),t.hackReset?s("div",{staticClass:"info"},t._l(t.imgUrl,function(e,n){return s("div",{key:n},[s("img",{staticClass:"itemimg",attrs:{src:t.imgUrl[n],alt:""}})])}),0):t._e()],1)},staticRenderFns:[]};e.a=n},ujrL:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"busMap-preivew"},[s("basicHeader",{attrs:{desName:t.options.name}}),t._v(" "),s("mapComponent",{ref:"mapObj",staticClass:"mapComponent2",attrs:{dataFLag:!1}}),t._v(" "),s("div",{staticClass:"mapPreview"},[s("swiper",{ref:"mySwiper",attrs:{options:t.swiperOption},on:{slideChangeTransitionEnd:t.slideChangeTransitionEnd}},[t._l(t.steps,function(e,n){return s("swiper-slide",{key:n},[s("div",{staticClass:"stepItem"},[s("p",[t._v(t._s(e.sname))])])])}),t._v(" "),s("div",{staticClass:"swiper-button-prev1 swiper-button icon-wj_ic_left",attrs:{slot:"button-prev"},slot:"button-prev"}),t._v(" "),s("div",{staticClass:"swiper-button-next1 swiper-button icon-wj_ic_right",attrs:{slot:"button-next"},slot:"button-next"})],2)],1)],1)},staticRenderFns:[]};e.a=n},urRE:function(t,e){},v2ns:function(t,e){},wK3u:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"busDetail"},[s("transcode",{staticClass:"transCode"}),t._v(" "),s("div",{staticClass:"busDetail-header"},[s("basicHeader",{attrs:{desName:t.msg}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.transits.length>0,expression:"transits.length>0"}],staticClass:"bus-swiper"},[s("swiper",{ref:"mySwiper",attrs:{options:t.swiperOption},on:{slideChangeTransitionEnd:t.slideChangeTransitionEnd}},[t._l(t.transits,function(e,n){return s("swiper-slide",{key:n},[s("div",{staticClass:"listbox"},[s("div",{staticClass:"mapPreview"},[s("mapPreview",{nativeOn:{click:function(e){t.goBusMapPreview("","start")}}})],1),t._v(" "),s("basicList",{attrs:{v:e,activeIndex:n}})],1)])}),t._v(" "),s("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)],1),t._v(" "),s("div",{staticClass:"busDetail-content"},[t._l(t.mysegments,function(e,n){return s("div",{key:n,staticClass:"busDetail-list"},[s("div",{staticClass:"section"},[s("div",{staticClass:"walking"},[t.startName(e,n)?s("div",{staticClass:"myposition leftIcon green",domProps:{innerHTML:t._s(t.startName(e,n))},on:{click:function(e){t.goBusMapPreview("","start")}}}):t._e(),t._v(" "),e.walking?s("div",{staticClass:"walking-distance baseline dashed",on:{click:function(e){t.goBusMapPreview(n,"walking")}}},[s("span",{staticClass:"icon-wj_ic_onfoot"}),t._v(" "),s("span",[t._v(t._s(t._f("formatDistance")(e)))])]):t._e()]),t._v(" "),t.departure_stop(e,n)?s("div",{staticClass:"busline baseline solid",on:{click:function(s){t.goBusMapPreviewOrBusLineInfo(n,"busline",e)}}},[s("div",{staticClass:"bus-departure_stop leftIcon",class:{green:"上车"===t.showSame(e,n),transform:"上车"!==t.showSame(e,n)}},[s("span",[t._v(t._s(t.departure_stop(e,n)))]),t._v(" "),s("span",[t._v(t._s(t.showSame(e,n)))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.departure_stop(e,n),expression:"departure_stop(v,i)"}],staticClass:"bus-via_stops"},[s("div",{staticClass:"bus-time"},[s("h3",[t._v(t._s(e.buslines[0].name))]),t._v(" "),e.via_stops_modify[0].lfstdetime?s("div",{staticClass:"nearestBus"},[s("span",[t._v("最近一辆")]),t._v(" "),s("span",[t._v(t._s(t.findBusInfo(e.via_stops_modify[0])))]),t._v(" "),s("span",[t._v("站到达")])]):t._e(),t._v(" "),e.via_stops_modify[0].lfstdetime?s("div",{staticClass:"timeline"},[t._v("首班车 "+t._s(e.via_stops_modify[0].lfstdftime)+" 末班"+t._s(e.via_stops_modify[0].lfstdetime))]):t._e()]),t._v(" "),s("div",{staticClass:"bus-stopsNums",class:{showFlag:t.showFlags[n]},on:{click:function(e){e.stopPropagation(),t.transformFlag(n)}}},[s("p",[t._v(t._s(e.via_stops_modify.length)+"站")]),t._v(" "),s("i",{staticClass:"icon-wj_ic_down"})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlags[n],expression:"showFlags[i]"}],staticClass:"allStopsList"},t._l(e.via_stops_modify,function(n,i){return s("div",{key:i,staticClass:"via_stop"},[s("p",[t._v(t._s(n.name))]),t._v(" "),s("span",[t._v(t._s(t._f("formatStationName")(i,e.via_stops_modify)))])])}),0)])]):t._e()])])}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.transits.length>0,expression:"transits.length>0"}],staticClass:"detanceline baseline solid",on:{click:function(e){t.goBusMapPreview("","end")}}},[s("div",{staticClass:"bustDetail-destance leftIcon red"},[t._v(t._s(t.options.address))])])],2)],1)},staticRenderFns:[]};e.a=n},wPzD:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"previewBtn",data:function(){return{msg:"地图预览按钮"}},methods:{}}},xJD8:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"App",data:function(){return{}},mounted:function(){},methods:{}}},xzUU:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"routeItem"},[s("div",{staticClass:"durations"},[s("span",[t._v(t._s(t._f("formatTime")(this.v.duration)))]),t._v(" "),s("span",[t._v("步行"+t._s(this.v.walking_distance)+"m")])]),t._v(" "),s("div",{staticClass:"bus",attrs:{id:"bus-normal"},domProps:{innerHTML:t._s(t.formatBus(this.v.segments))}}),t._v(" "),s("div",{staticClass:"info"},[t.v.totalStations?t._e():s("span",[t._v(t._s(t._f("formatStations")(this.v.segments)))]),t._v(" "),t.v.totalStations?s("span",[t._v(t._s(t.v.totalStations)+"站")]):t._e(),t._v(" "),s("span",[t._v(".")]),t._v(" "),s("span",[t._v(t._s(this.v.cost)+"元")]),t._v(" "),s("span",[t._v(".")]),t._v(" "),s("span",[t._v(t._s(t._f("formatDeparture_stop")(this.v.segments)))])])])},staticRenderFns:[]};e.a=n},yN5e:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"history",data:function(){return{msg:"历史或者搜索记录",history:[],searchHistoryArray:[],clearMsg:"取消"}},created:function(){var t=localStorage.getItem("searchHistory");t&&(this.searchHistoryArray=JSON.parse(t))},mounted:function(){},methods:{goDestation:function(t){this.$root.$emit("transterVal",t),this.searchHistoryArray.push(t),localStorage.setItem("searchHistory",JSON.stringify(this.searchHistoryArray)),t.location&&this.$router.push({path:"/destation",query:{name:encodeURI(t.name),address:encodeURI(t.address),location:t.location,id:t.id}})},clearList:function(){this.$root.$emit("transterVal",{name:""})}},computed:{},watch:{}}},yfwo:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("search",{ref:"searchObj"}),t._v(" "),s("mapComponent",{ref:"mapObj",staticClass:"mapComponent",class:{showChannel:t.showChannel&&!this.$refs.searchObj.showList},attrs:{dataFLag:!0,dataFrom:t.dataFrom},on:{wjtran_search:t.searchStation}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showChannel&&!this.$refs.searchObj.showList,expression:"showChannel&&!this.$refs.searchObj.showList"}],staticClass:"channel"},[s("div",{staticClass:"tips-l"},[s("div",{staticClass:"stationName"},[t._v(t._s(t.stationInfo.name)+"站")]),t._v(" "),s("div",{staticClass:"channels"},[t._v(t._s(t.stationInfo.channels))])]),t._v(" "),s("div",{staticClass:"tips-r",on:{click:function(e){t.getWalking()}}},[s("p",{staticClass:"icon-wj_ic_onfoot"}),t._v(" "),s("p",[t._v("去这里")])])]),t._v(" "),t.newestMessage?s("div",{staticClass:"newest"},[s("div",{staticClass:"circle",class:{noRead:t.noRead},on:{click:function(e){t.goNotice(t.newestMessage.id)}}},[s("i",{staticClass:"icon-wj_ic_message"})]),t._v(" "),t.noRead?s("div",{staticClass:"news-title",on:{click:function(e){t.goNotice(t.newestMessage.id)}}},[t._v(t._s(t.newestMessage.title))]):t._e()]):t._e(),t._v(" "),t.touchResult&&t.showTouchPos?s("div",{staticClass:"destation"},[s("div",{staticClass:"tips"},[s("div",{staticClass:"tips-l"},[s("p",[t._v(t._s(t.touchResult.formatted_address))]),t._v(" "),s("p",[t._v(t._s(t.touchResult.addressNum))])]),t._v(" "),s("div",{staticClass:"tips-r",on:{click:function(e){t.goDestation()}}},[s("p",{staticClass:"icon-wj_ic_onfoot"}),t._v(" "),s("p",[t._v("去这里")])])])]):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showFriend_tips,expression:"showFriend_tips"}],staticClass:"tips-firendly"},[s("div",{staticClass:"tips-box"},[s("p",[t._v("该地图线路仅供参考")]),t._v(" "),s("p",{on:{click:t.closeFriend_tips}},[t._v("关闭")])])])],1)},staticRenderFns:[]};e.a=n},yoqB:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"basicHeader"},[n("header",[n("div",{staticClass:"backArrow icon-wj_ic_back",on:{click:function(e){t.goBack()}}}),t._v(" "),n("p",[t._v(t._s(t.desName))]),t._v(" "),n("img",{attrs:{src:s("Z7VJ"),alt:""},on:{click:function(e){t.home()}}})])])},staticRenderFns:[]};e.a=n},zylF:function(t,e,s){"use strict";var n={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"buslines"},[n("basicHeader",{attrs:{desName:t.options.name}}),t._v(" "),n("div",{staticClass:"mapPreview"},[n("mapPreview",{nativeOn:{click:function(e){t.goBusMapPreview()}}})],1),t._v(" "),n("ul",{staticClass:"buslineBox"},t._l(t.busList,function(e,i){return n("li",{key:i,staticClass:"buslineItem",on:{click:function(e){t.goBusLinesInfo(i)}}},[n("h3",[t._v(t._s(e.lname)+"路")]),t._v(" "),n("div",{staticClass:"direction"},[n("span",[t._v(t._s(e.station[0].sname))]),t._v(" "),n("i",{staticClass:"icon-wj_ic_diraction"}),t._v(" "),n("span",[t._v(t._s(e.station[e.station.length-1].sname))])]),t._v(" "),n("div",{staticClass:"bustimes"},[n("div",[n("img",{attrs:{src:s("igwD"),alt:""}}),t._v(" "),n("span",[t._v(t._s(e.lfstdftime))])]),t._v(" "),n("div",[n("img",{attrs:{src:s("fd6U"),alt:""}}),t._v(" "),n("span",[t._v(t._s(e.lfstdetime))])]),t._v(" "),e.station[0].price?n("div",[n("span",[t._v(".")]),t._v(" "),n("span",[t._v("票价"+t._s(e.station[0].price)+"元")])]):t._e()])])}),0)],1)},staticRenderFns:[]};e.a=n}},["NHnr"]);
//# sourceMappingURL=app.bc0e901162a617f56ebb.js.map